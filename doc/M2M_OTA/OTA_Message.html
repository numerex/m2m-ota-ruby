<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: M2M_OTA::OTA_Message
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (O)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../M2M_OTA.html" title="M2M_OTA (module)">M2M_OTA</a></span></span>
     &raquo; 
    <span class="title">OTA_Message</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: M2M_OTA::OTA_Message
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">M2M_OTA::OTA_Message</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/m2m-ota.rb</dd>
  
</dl>
<div class="clear"></div>





  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#autoObjectId-instance_method" title="#autoObjectId (instance method)">- (Object) <strong>autoObjectId</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute autoObjectId.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#eventCode-instance_method" title="#eventCode (instance method)">- (Object) <strong>eventCode</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute eventCode.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#majorVersion-instance_method" title="#majorVersion (instance method)">- (Object) <strong>majorVersion</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute majorVersion.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#messageType-instance_method" title="#messageType (instance method)">- (Object) <strong>messageType</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute messageType.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#minorVersion-instance_method" title="#minorVersion (instance method)">- (Object) <strong>minorVersion</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute minorVersion.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects-instance_method" title="#objects (instance method)">- (Object) <strong>objects</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute objects.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequenceId-instance_method" title="#sequenceId (instance method)">- (Object) <strong>sequenceId</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute sequenceId.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#timestamp-instance_method" title="#timestamp (instance method)">- (Object) <strong>timestamp</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute timestamp.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">- (Object) <strong>&lt;&lt;</strong>(obj) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_w-instance_method" title="#from_w (instance method)">- (Object) <strong>from_w</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header-instance_method" title="#header (instance method)">- (String) <strong>header</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Binary string header of the message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (OTA_Message) <strong>initialize</strong>(p = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of OTA_Message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_hex-instance_method" title="#to_hex (instance method)">- (Object) <strong>to_hex</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_w-instance_method" title="#to_w (instance method)">- (Object) <strong>to_w</strong>(calc_crc = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>to_w.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="M2M_OTA::OTA_Message (class)">OTA_Message</a></span></tt>) <strong>initialize</strong>(p = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A new instance of OTA_Message</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_from_w'>from_w</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='ivar'>@messageType</span>  <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:messageType</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
    <span class='ivar'>@majorVersion</span> <span class='op'>=</span> <span class='const'>MAJOR_VERSION</span>
    <span class='ivar'>@minorVersion</span> <span class='op'>=</span> <span class='const'>MINOR_VERSION</span>
    <span class='ivar'>@eventCode</span>    <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:eventCode</span><span class='rbracket'>]</span>   <span class='op'>||</span> <span class='int'>0</span>
    <span class='ivar'>@sequenceId</span>   <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:sequenceId</span><span class='rbracket'>]</span>  <span class='op'>||</span> <span class='int'>0</span>
    <span class='ivar'>@timestamp</span>    <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span>   <span class='op'>||</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>*</span> <span class='int'>1000</span>
    <span class='ivar'>@objects</span>      <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    
    <span class='ivar'>@autoObjectId</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="autoObjectId=-instance_method"></span>
      <span id="autoObjectId-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="autoObjectId-instance_method">
  
    - (<tt>Object</tt>) <strong>autoObjectId</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute autoObjectId</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_autoObjectId'>autoObjectId</span>
  <span class='ivar'>@autoObjectId</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="eventCode=-instance_method"></span>
      <span id="eventCode-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="eventCode-instance_method">
  
    - (<tt>Object</tt>) <strong>eventCode</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute eventCode</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eventCode'>eventCode</span>
  <span class='ivar'>@eventCode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="majorVersion-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="majorVersion-instance_method">
  
    - (<tt>Object</tt>) <strong>majorVersion</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute majorVersion</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 307</span>

<span class='kw'>def</span> <span class='id identifier rubyid_majorVersion'>majorVersion</span>
  <span class='ivar'>@majorVersion</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="messageType=-instance_method"></span>
      <span id="messageType-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="messageType-instance_method">
  
    - (<tt>Object</tt>) <strong>messageType</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute messageType</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_messageType'>messageType</span>
  <span class='ivar'>@messageType</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="minorVersion-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="minorVersion-instance_method">
  
    - (<tt>Object</tt>) <strong>minorVersion</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute minorVersion</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 307</span>

<span class='kw'>def</span> <span class='id identifier rubyid_minorVersion'>minorVersion</span>
  <span class='ivar'>@minorVersion</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="objects-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="objects-instance_method">
  
    - (<tt>Object</tt>) <strong>objects</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute objects</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects'>objects</span>
  <span class='ivar'>@objects</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="sequenceId=-instance_method"></span>
      <span id="sequenceId-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="sequenceId-instance_method">
  
    - (<tt>Object</tt>) <strong>sequenceId</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute sequenceId</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sequenceId'>sequenceId</span>
  <span class='ivar'>@sequenceId</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="timestamp=-instance_method"></span>
      <span id="timestamp-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="timestamp-instance_method">
  
    - (<tt>Object</tt>) <strong>timestamp</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute timestamp</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timestamp'>timestamp</span>
  <span class='ivar'>@timestamp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="<<-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;&lt;</strong>(obj) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="OTA_Exception.html" title="M2M_OTA::OTA_Exception (class)">OTA_Exception</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 334</span>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>OTA_Exception</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid object added to message</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>OTA_Object</span>
  <span class='ivar'>@objects</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="from_w-instance_method">
  
    - (<tt>Object</tt>) <strong>from_w</strong>(msg) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>Binary</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>string containing a received OTA message</p>
</div>
      
    </li>
  
</ul>

<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="OTA_Exception.html" title="M2M_OTA::OTA_Exception (class)">OTA_Exception</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 373</span>

<span class='kw'>def</span> <span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CCCnQ</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@messageType</span>  <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='ivar'>@majorVersion</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&gt;&gt;</span> <span class='int'>4</span>
  <span class='ivar'>@minorVersion</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='int'>0x0F</span>
  <span class='ivar'>@eventCode</span>    <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
  <span class='ivar'>@sequenceId</span>   <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>
  <span class='ivar'>@timestamp</span>    <span class='op'>=</span> <span class='id identifier rubyid_htonq'>htonq</span><span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@objects</span>      <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@autoObjectId</span> <span class='op'>=</span> <span class='int'>0</span>


  <span class='id identifier rubyid_msgLen'>msgLen</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='id identifier rubyid_msgPtr'>msgPtr</span> <span class='op'>=</span> <span class='int'>14</span> <span class='comment'># First index of objects
</span>
  <span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_msgPtr'>msgPtr</span><span class='op'>..</span><span class='id identifier rubyid_msgLen'>msgLen</span><span class='rbracket'>]</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_msgPtr'>msgPtr</span> <span class='op'>!=</span> <span class='id identifier rubyid_msgLen'>msgLen</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='id identifier rubyid_objHeader'>objHeader</span> <span class='op'>=</span> <span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_objId'>objId</span>     <span class='op'>=</span> <span class='id identifier rubyid_objHeader'>objHeader</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_objType'>objType</span>   <span class='op'>=</span> <span class='id identifier rubyid_objHeader'>objHeader</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_objType'>objType</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_BYTE</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Byte</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_INT</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Int</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_FLOAT</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Float</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_STRING</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_String</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_ARRAY_FLOAT</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Float_Array</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_ARRAY_BYTE</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Byte_Array</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_ARRAY_INT</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Int_Array</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>OBJTYPE_TIMESTAMP</span>
      <span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> <span class='const'>OTA_Timestamp</span><span class='period'>.</span><span class='id identifier rubyid_from_w'>from_w</span><span class='lparen'>(</span><span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>OTA_Exception</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid object type in message at byte %d</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='id identifier rubyid_msgPtr'>msgPtr</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@objects</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_obj'>obj</span>
    
    <span class='id identifier rubyid_msgPtr'>msgPtr</span> <span class='op'>+=</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_remainingObjBuf'>remainingObjBuf</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_msgPtr'>msgPtr</span><span class='op'>..</span><span class='id identifier rubyid_msgLen'>msgLen</span><span class='rbracket'>]</span>

  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_msgCrc'>msgCrc</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_msgPtr'>msgPtr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_objCrc'>objCrc</span>  <span class='op'>=</span> <span class='id identifier rubyid_crc'>crc</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_to_w'>to_w</span><span class='lparen'>(</span><span class='id identifier rubyid_calc_crc'>calc_crc</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
  
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>OTA_Exception</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CRC error</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_msgCrc'>msgCrc</span> <span class='op'>!=</span> <span class='id identifier rubyid_objCrc'>objCrc</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="header-instance_method">
  
    - (<tt>String</tt>) <strong>header</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Binary string header of the message</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Binary string header of the message</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_header'>header</span>
  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_majorVersion'>majorVersion</span> <span class='op'>&lt;&lt;</span> <span class='int'>4</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='id identifier rubyid_minorVersion'>minorVersion</span>
  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_messageType'>messageType</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_eventCode'>eventCode</span><span class='comma'>,</span> <span class='id identifier rubyid_sequenceId'>sequenceId</span><span class='comma'>,</span> <span class='id identifier rubyid_htonq'>htonq</span><span class='lparen'>(</span><span class='id identifier rubyid_timestamp'>timestamp</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CCCnQ</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_hex-instance_method">
  
    - (<tt>Object</tt>) <strong>to_hex</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_hex'>to_hex</span>
  <span class='id identifier rubyid_str'>str</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wire'>wire</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_to_w'>to_w</span>
  <span class='id identifier rubyid_wire'>wire</span><span class='period'>.</span><span class='id identifier rubyid_each_byte'>each_byte</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_str'>str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt>Object</tt>) <strong>to_s</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 429</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_str'>str</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;ota&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;raw&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_to_hex'>to_hex</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/raw&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;header&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;type&gt;M&lt;/type&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;version&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>   &lt;major&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@majorVersion</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/major&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>   &lt;minor&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@minorVersion</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/minor&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;/version&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;eventcode&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@eventCode</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/eventcode&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;sequenceid&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@sequenceId</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/sequenceid&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  &lt;timestamp&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@timestamp</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/timestamp&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;/header&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;objects&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@objects</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>   </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object'>object</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;/objects&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ota&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_str'>str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_w-instance_method">
  
    - (<tt>Object</tt>) <strong>to_w</strong>(calc_crc = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>to_w</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/m2m-ota.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_w'>to_w</span><span class='lparen'>(</span><span class='id identifier rubyid_calc_crc'>calc_crc</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span>
  <span class='id identifier rubyid_msg'>msg</span>   <span class='op'>+=</span> <span class='lbracket'>[</span><span class='ivar'>@objects</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='ivar'>@autoObjectId</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_autoObjectId'>autoObjectId</span> <span class='op'>=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_autoSet'>autoSet</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
      <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_objId'>objId</span>       <span class='op'>=</span> <span class='id identifier rubyid_autoObjectId'>autoObjectId</span>
      <span class='id identifier rubyid_autoObjectId'>autoObjectId</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='ivar'>@objects</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
    <span class='id identifier rubyid_autoSet'>autoSet</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_autoSet'>autoSet</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>+=</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_to_w'>to_w</span>
  <span class='kw'>end</span>
  <span class='comment'># Checksum byte
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_calc_crc'>calc_crc</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_crc'>crc</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_msg'>msg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Apr 25 15:35:20 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.5 (ruby-1.9.3).
</div>

  </body>
</html>